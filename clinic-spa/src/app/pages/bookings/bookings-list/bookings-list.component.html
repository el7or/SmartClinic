<nb-card>
  <nb-card-header>
    <div class="row text-center">
      <div class="col-4">
        <button nbButton (click)="onPrevDay(currentDay)" status="info" shape="semi-round">
          <nb-icon [icon]="langgService.locale=='ar' ? 'arrow-circle-right-outline':'arrow-circle-left-outline'">
          </nb-icon>
          <span langg>Previous Day</span>
        </button></div>
      <div class="col-4">
        <input type="text" bsDatepicker nbInput #bookingDate name="bookingDate" id="input-bookingDate" fullWidth
          required [bsConfig]="{ adaptivePosition: true, containerClass: 'theme-dark-blue', showWeekNumbers: false }"
          (bsValueChange)="onChooseBookingsDate(bookingDate)" [bsValue]="currentDay"
          [status]="bookingDate.touched ? (bookingDate.invalid  ? 'danger' : 'success') : ''">
      </div>
      <div class="col-4">
        <button nbButton (click)="onNextDay(currentDay)" status="info" shape="semi-round">
          <span langg>Next Day</span>
          <nb-icon [icon]="langgService.locale=='ar' ? 'arrow-circle-left-outline':'arrow-circle-right-outline'">
          </nb-icon>
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <div class="form-control-group">
      <input nbInput ngModel [placeholder]="'Patient Name Or Mobile' | langg" [typeahead]="autoCompleteList"
        typeaheadOptionField="nameMobile" (typeaheadNoResults)="noResultAutoComplete = $event"
        (typeaheadOnSelect)="onSelectAutocomplete($event)" [isAnimated]="true" class="form-control">
      <p class="error-message" *ngIf="noResultAutoComplete" langg>No Results Found!</p>
    </div>
    <table class="table table-striped table-bordered" [nbSpinner]="tableLoading" nbSpinnerStatus="info">
      <thead class="thead-dark">
        <tr>
          <th>#</th>
          <th langg>ID</th>
          <th langg>Time</th>
          <th langg>Name</th>
          <th langg>Mobile</th>
          <th langg>Booking Type</th>
          <th langg>Services</th>
          <th langg>Cost</th>
          <th langg>Booking Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let booking of bookingsList; let i = index;">
          <td>{{booking.seq}}</td>
          <td>{{booking.id}}</td>
          <td>{{booking.time}}</td>
          <td>{{booking.name}}</td>
          <td>{{booking.mobile}}</td>
          <td langg>{{booking.type}}</td>
          <td langg>{{booking.service}}</td>
          <td langg>{{booking.cost | currency:'EGP'}}
            <button nbButton (click)="onOpenPaymentSummary(1)" ghost size="tiny" status="warning"
              [nbTooltip]="'Payment Details' | langg">
              <nb-icon icon="info"></nb-icon>
            </button>
          </td>
          <td *ngIf="booking.isEnter" langg>Done</td>
          <td *ngIf="!booking.isEnter" langg>Not Done</td>
          <td class="text-center">
            <button *ngIf="booking.isEnter" (click)="onBook(0)" nbButton size="tiny" status="success"
              [nbTooltip]="'New Booking' | langg">
              <nb-icon icon="file-add"></nb-icon>
            </button>
            <button *ngIf="!booking.isEnter" (click)="onBook(1)" nbButton size="tiny" status="warning"
              [nbTooltip]="'Edit Booking' | langg">
              <nb-icon icon="edit"></nb-icon>
            </button>&nbsp;
            <button *ngIf="!booking.isEnter" (click)="onDeleteBooking()" nbButton size="tiny" status="danger"
              [nbTooltip]="'Cancel Booking' | langg">
              <nb-icon icon="trash-2"></nb-icon>
            </button>&nbsp;
            <button nbButton [routerLink]="['/pages/patients/details',booking.id]" size="tiny" status="info"
              [nbTooltip]="'Patient Profile' | langg">
              <nb-icon icon="folder"></nb-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <swal #deleteSwal icon="error" showCancelButton="true" focusCancel="true" [title]="'Attention !' | langg"
      [text]="'This data will be deleted forever and all other data related to it, and it will not be retrievable again!' | langg"
      [confirmButtonText]="'Delete' | langg" [cancelButtonText]="'Cancel' | langg" confirmButtonColor="#ff3d71">
    </swal>

    <swal #doneSwal [title]="'Success' | langg" [text]="'Done successfully!' | langg" icon="success" timer="2000"
      [showConfirmButton]="false">
    </swal>
  </nb-card-body>
</nb-card>
