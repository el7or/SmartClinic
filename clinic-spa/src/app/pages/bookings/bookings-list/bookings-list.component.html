<nb-card>
  <nb-card-header>
    <div class="row">
      <div class="col-4 text-center my-auto">
        <button nbButton (click)="onPrevDay(currentDay)" status="info" shape="semi-round">
          <nb-icon [icon]="langgService.locale=='ar' ? 'arrow-circle-right-outline':'arrow-circle-left-outline'">
          </nb-icon>
          <span langg>Previous Day</span>
        </button></div>
      <div class="col-4">
        <label for="input-bookingDate" class="label"><span langg>Bookings Date</span>:</label>
        <input type="text" bsDatepicker nbInput #bookingDate name="bookingDate" fullWidth id="input-bookingDate"
          [placeholder]="'Choose Day' | langg" readonly
          [bsConfig]="{ adaptivePosition: true, containerClass: 'theme-dark-blue', showWeekNumbers: false }"
          (bsValueChange)="onChooseBookingsDate($event)" [bsValue]="currentDay" [daysDisabled]="weekendDays">
      </div>
      <div class="col-4 text-center my-auto">
        <button nbButton (click)="onNextDay(currentDay)" status="info" shape="semi-round">
          <span langg>Next Day</span>
          <nb-icon [icon]="langgService.locale=='ar' ? 'arrow-circle-left-outline':'arrow-circle-right-outline'">
          </nb-icon>
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <button nbButton type="button" [routerLink]="['/pages/patients/details','new','basic']" hero size="tiny"
      class="mx-3 mb-2">
      <nb-icon icon="person-add-outline"></nb-icon><span langg>Add New Patient</span>
    </button>
    <table class="table table-striped table-bordered table-light" [nbSpinner]="formLoading" nbSpinnerStatus="info">
      <thead class="thead-dark">
        <tr>
          <th>#</th>
          <th langg>Time</th>
          <th langg>Name</th>
          <th langg>Mobile</th>
          <th langg>Booking Type</th>
          <th langg>Services</th>
          <th langg>Amount Paid</th>
          <th langg>Amount Due</th>
          <th langg>Booking Status</th>
          <th></th>
        </tr>
      </thead>
      <tbody *ngIf="!bookingsList?.length">
        <tr>
          <td colspan="10" class="text-center">
            <h5 langg>No Results !</h5>
          </td>
        </tr>
      </tbody>
      <tbody *ngIf="bookingsList?.length">
        <tr *ngFor="let booking of bookingsList; let i = index;">
          <td>{{booking.daySeqNo}}</td>
          <td>{{booking.time | time12Hour}}</td>
          <td>{{booking.name}}</td>
          <td>{{booking.mobile}}</td>
          <td langg>{{booking.type}}</td>
          <td langg>{{booking.services}}</td>
          <td langg>{{booking.paid | currency:'EGP':'symbol':'1.0'}}</td>
          <td langg>{{booking.due | currency:'EGP':'symbol':'1.0'}}</td>
          <td *ngIf="booking.isCanceled" langg>Canceled</td>
          <td *ngIf="booking.isEnter && !booking.isCanceled" langg>Done</td>
          <td *ngIf="!booking.isEnter && !booking.isCanceled" langg>Not Done</td>
          <td class="text-center">
            <button (click)="onBook(booking.bookId,booking.patientId)" nbButton size="tiny" status="warning"
              [nbTooltip]="'Edit Booking' | langg">
              <nb-icon icon="edit"></nb-icon>
            </button>&nbsp;
            <button *ngIf="booking.isEnter || booking.isCanceled" (click)="onBook(0,booking.patientId)" nbButton
              size="tiny" status="success" [nbTooltip]="'New Booking' | langg">
              <nb-icon icon="file-add"></nb-icon>
            </button>
            <button *ngIf="!booking.isEnter && !booking.isCanceled" (click)="onDeleteBooking(booking.bookId)" nbButton
              size="tiny" status="danger" [nbTooltip]="'Cancel Booking' | langg">
              <nb-icon icon="slash"></nb-icon>
            </button>&nbsp;
            <button nbButton (click)="onOpenFilePatient(booking.patientCodeId)" size="tiny" status="info"
              [nbTooltip]="'Patient Profile' | langg">
              <nb-icon icon="folder"></nb-icon>
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot *ngIf="bookingsList?.length">
        <tr class="table-dark font-weight-bolder lead">
          <td colspan="6"><span langg>Total Amount:</span></td>
          <td colspan="4">{{totalPaid | currency:'EGP':'symbol':'1.0'}}</td>
        </tr>
      </tfoot>
    </table>
  </nb-card-body>
</nb-card>

<swal #cancelSwal icon="warning" showCancelButton="true" focusCancel="true" [title]="'Attention !' | langg"
  [text]="'Are you sure to cancel the Booking?' | langg" [confirmButtonText]="'Cancel Booking' | langg"
  [cancelButtonText]="'No' | langg" confirmButtonColor="#ff3d71">
</swal>

<swal #doneSwal [title]="'Success' | langg" [text]="'Done successfully!' | langg" icon="success" timer="2000"
  [showConfirmButton]="false">
</swal>
