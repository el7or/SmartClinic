<form #form="ngForm" aria-labelledby="title" [nbSpinner]="formLoading" nbSpinnerStatus="success">
  <label for="input-diseases" class="label"><span langg>Associated Diseases Summary</span>:</label>
  <textarea nbInput [ngModel]="diseaseSummary" #diseases name="diseases" id="input-diseases" disabled
    fullWidth rows="1"></textarea>
    <hr>
    <h6 langg>Add Complaints:</h6>
  <table class="table">
    <tbody>
      <tr *ngFor="let item of complaints; index as i;">
        <td>
          <input nbInput [(ngModel)]="item.name" [typeahead]="complaintsNames" fullWidth
            (typeaheadNoResults)="item.isNameValid = !$event" [placeholder]="'Complaint' | langg" [isAnimated]="true"
            fieldSize="small" [typeaheadMinLength]="0" [ngModelOptions]="{standalone: true}"
            [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="15">
          <ng-container *ngIf="!item.isNameValid">
            <label class="error-message" langg>This Name does not exist! Do you add it to the
              list?</label>&nbsp;
            <button nbButton type="button" (click)="onAddNewItemToList(item.name);item.isNameValid=true" status="info"
              size="small" class="mt-2" langg>Add</button>
          </ng-container>
        </td>
        <td>
          <input nbInput [(ngModel)]="item.period" [ngModelOptions]="{standalone: true}" [placeholder]="'Period' | langg"
            fullWidth fieldSize="small">
        </td>
        <td>
          <button (click)="onRemoveComplaint(i)" nbButton [hidden]="item== complaints[0]" [nbTooltip]="'Remove Complaint' | langg" size="tiny"
            status="danger">
            <nb-icon icon="close-square"></nb-icon>
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <button nbButton size="small" (click)="onAddComplaint()"
    [disabled]="!complaints[0]?.name || !complaints[0]?.isNameValid" class="mx-1 mb-1">
    <nb-icon icon="plus-outline"></nb-icon><span langg>Add Complaint</span>
  </button>
  <div class="form-control-group">
    <textarea nbInput ngModel #note="ngModel" name="note" [placeholder]="'General notes on Complaint' | langg"
      fullWidth></textarea>
  </div>

  <div class="text-center nbButton-group mb-1">
    <button nbButton type="submit" status="success" (click)="onSave(form)"
      [disabled]="!complaints[0]?.name || !complaints[0]?.isNameValid" langg>Save</button>
    <button nbButton type="button" status="danger" (click)="location.back()" langg>Cancel</button>
  </div>
</form>

<h6 langg>Complaints Summary:</h6>
    <table class="table table-bordered">
      <thead class="thead-light">
        <tr>
          <th langg>Visit Date</th>
          <th langg>Complaints</th>
          <th langg>Notes</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>2020-5-2</td>
          <td>صداع - آلام الركبة</td>
          <td>بسبب تركيب مفصل</td>
          <td class="text-center">
            <button nbButton type="button" (click)="onDeleteComplaint()" status="danger" size="small"
              langg>Delete</button>
          </td>
        </tr>
        <tr>
          <td>2020-3-2</td>
          <td>آلام الكتف</td>
          <td></td>
          <td class="text-center">
            <button nbButton type="button" (click)="onDeleteComplaint()" status="danger" size="small"
              langg>Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

<swal #doneSwal [title]="'Success' | langg" [text]="'Done successfully!' | langg" icon="success" timer="2000"
  [showConfirmButton]="false">
</swal>

<swal #deleteSwal icon="error" showCancelButton="true" focusCancel="true" [title]="'Attention !' | langg"
  [text]="'This data will be deleted forever and all other data related to it, and it will not be retrievable again!' | langg"
  [confirmButtonText]="'Delete' | langg" [cancelButtonText]="'Cancel' | langg" confirmButtonColor="#ff3d71">
</swal>
