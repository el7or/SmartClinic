<nb-card>
  <nb-card-header>
    <button nbButton [routerLink]="['/pages/patients/details','new','basic']" hero size="small">
      <nb-icon icon="person-add-outline"></nb-icon><span langg>Add New Patient</span>
    </button>
  </nb-card-header>
  <nb-card-body>
    <form #form="ngForm" (ngSubmit)="onSearch(patientSearch.value)" aria-labelledby="title" [nbSpinner]="formLoading">
      <div class="row mb-2">
        <div class="col-md-6 col-sm-6">
          <input nbInput ngModel #patientSearch="ngModel" name="patientSearch" [placeholder]="'Patient Name Search or Mobile number' | langg"
            fullWidth minlength="7" maxlength="50"
            [status]="patientSearch.dirty && patientSearch.value ? (patientSearch.invalid  ? 'danger' : 'success') : ''" fieldSize="small">
          <ng-container *ngIf="patientSearch.invalid && patientSearch.touched">
            <small class="error-message" *ngIf="patientSearch?.errors.minlength || patientSearch?.errors.maxlength"
              langg>Patient Search should contains at least 7 characters!</small>
          </ng-container>
        </div>
        <!-- <div class="col-md-3 col-sm-6">
          <input nbInput ngModel #phone="ngModel" name="phone" [placeholder]="'Patient Mobile Search' | langg" pattern="[0-9]*"
            minlength="10" [status]="phone.dirty ? (phone.invalid  ? 'danger' : 'success') : ''" fullWidth
            fieldSize="small">
          <ng-container *ngIf="phone.invalid && phone.touched">
            <small class="error-message" *ngIf="phone?.errors.pattern || phone?.errors.minlength" langg>Mobile must be
              real number!</small>
          </ng-container>
        </div>
        <div class="col-md-3 col-sm-6">
          <input nbInput ngModel #patientCode="ngModel" name="patientCode" [placeholder]="'Patient Code Search' | langg"
              fullWidth type="number" min="1"
              [status]="patientCode.dirty ? (patientCode.invalid  ? 'danger' : 'success') : ''" fieldSize="small">
        </div> -->
        <div class="col-md-3 col-sm-6">
          <button nbButton type="submit" [disabled]="!form.dirty" status="primary" fullWidth size="small">
            <nb-icon icon="search-outline"></nb-icon><span langg>search</span>
          </button>
        </div>
      </div>
    </form>
    <table class="table table-striped table-light">
      <thead class="thead-dark">
        <tr>
          <!-- <th langg>ID</th> -->
          <th langg>Patient Name</th>
          <th langg>Mobile</th>
          <th langg>Visits Count</th>
          <th langg>Last Visit Date</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of patientsList">
          <td>{{item.name}}</td>
          <td>{{item.mobile}}</td>
          <td>{{item.visitsCount}}</td>
          <td>{{item.lastVisit | localDateShort}}</td>
          <td class="text-center">
            <button nbButton [routerLink]="['/pages/patients/details',item.codeId,'basic']" size="tiny" status="info" langg>Patient
              Profile</button>&nbsp;
            <button nbButton (click)="onBook(0)" size="tiny" status="success" langg>Book</button>&nbsp;
            <button nbButton (click)="onDeletePatient()" size="tiny" status="danger" langg>Delete</button>
          </td>
        </tr>
        <!-- <tr>
          <td>2</td>
          <td>منى السيد عبد الحفيظ</td>
          <td>01245646546</td>
          <td>20
            <button nbButton ghost size="tiny" status="warning" [nbTooltip]="'Visits Details' | langg" (click)="onOpenBookingsSummery(1)">
              <nb-icon icon="info"></nb-icon>
            </button></td>
          <td>2020/2/5</td>
          <td class="text-center">
            <button nbButton [routerLink]="['/pages/patients/details',2,'basic']" size="tiny" status="info" langg>Patient
              Profile</button>&nbsp;
            <button nbButton (click)="onBook(0)" size="tiny" status="success" langg>Book</button>&nbsp;
            <button nbButton (click)="onDeletePatient()" size="tiny" status="danger" langg>Delete</button>
          </td>
        </tr> -->
      </tbody>
    </table>
    <pagination [boundaryLinks]="true" [itemsPerPage]="10" [totalItems]="500" [ngModel]="1" [maxSize]="10"
      previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;"></pagination>
    <!-- <pagination [boundaryLinks]="true" [itemsPerPage]="pagination.pageSize" [totalItems]="pagination.totalItemCount"
    [(ngModel)]="pagination.pageNumber" (pageChanged)="pageChanged($event);" previousText="&lsaquo;"
    nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
  </pagination> -->
  </nb-card-body>
</nb-card>

<swal #deleteSwal icon="error" showCancelButton="true" focusCancel="true" [title]="'Attention !' | langg"
  [text]="'This data will be deleted forever and all other data related to it, and it will not be retrievable again!' | langg"
  [confirmButtonText]="'Delete' | langg" [cancelButtonText]="'Cancel' | langg" confirmButtonColor="#ff3d71">
</swal>

<swal #doneSwal [title]="'Success' | langg" [text]="'Done successfully!' | langg" icon="success" timer="2000"
  [showConfirmButton]="false">
</swal>
